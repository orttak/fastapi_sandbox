
With "alembic init alembic", define Alembic folder structure. 
Then You should define DB credentials under "alembic/env.py"
from app.models import Base
from app.config import settings
config = context.config
#same as database.py file
SQL_DATABASE_URL = f'postgresql://{settings.database_username}:{settings.database_password}@{settings.database_hostname}:{settings.database_port}/{settings.database_name}'
#below command we overrite setting in alembic.ini file
config.set_main_option("sqlalchemy.url", SQL_DATABASE_URL)
fileConfig(config.config_file_name)
target_metadata = Base.metadata

Then "alembic revision --autogenerate -m "Initial migration"", create initial migration.
"autogenerate"  writes all the changes in models.py into a revision file and so 
all the tables are written into the DB. 
Then "alembic upgrade head", upgrade database to latest version.

If you change your models.py file, you should run "alembic revision --autogenerate -m "Update migration"", create update migration.
Then "alembic upgrade head", upgrade database to latest version.


ALEMBIC 101.
1-After "alembic init foldername"
2- $alembic revision -m "create post table"
3- if you llok at the revision file, you will sen upgrade and downgrade default functions.
We can define this revision role within this functions.
```
def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('password', sa.String(), nullable=False),
    sa.Column('created_at', sa.TIMESTAMP(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('phone_number', sa.String(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('email')
    )
```
```
def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('users')
```
